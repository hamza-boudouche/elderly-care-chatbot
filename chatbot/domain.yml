version: '3.1'
intents:
- affirm
- bot_challenge
- create_event
- deny
- get_event
- goodbye
- greet
- inform_create
- mood_great
- stop
- wikipedia
- inform_index
- youtube_search

entities:
- start
- end
- time
- ordinal

slots:
  youtube_query:
    type: text
    mappings:
      - type: from_text
        conditions:
        - active_loop: search_form
          requested_slot: youtube_query
  youtubeResults:
    type: any
    influence_conversation: false
    mappings:
      - type: custom
  search_query:
    type: any
    influence_conversation: false
    mappings:
      - type: custom
  historics:
    type: any
    influence_conversation: false
    mappings:
      - type: custom
  NEXT_UTTERANCE:
    type: any
    influence_conversation: false
    mappings:
      - type: custom
  summary:
    type: text
    mappings:
      - type: from_text
        conditions:
        - active_loop: create_form
          requested_slot: summary
  start:
    type: any
    mappings:
    - type: from_entity
      entity: time
      conditions:
      - active_loop: create_form
  end:
    type: any
    mappings:
    - type: from_entity
      entity: time
      conditions:
      - active_loop: create_form
  description:
    type: text
    mappings:
    - type: from_text
      conditions:
      - active_loop: create_form
        requested_slot: description
  index:
    type: any
    # influence_conversation: false
    mappings:
    - type: from_entity
      entity: ordinal


forms:
  create_form:
    required_slots:
      - summary
      - start
      - end
      - description
  search_form:
    required_slots:
      - youtube_query

responses:
  utter_greet:
    - text: Bonjour! comment vas-tu ?
  utter_cheer_up:
    - text: "Voila quelque chose pour te rendre heureux:"
      image: https://i.imgur.com/nGF1K8f.jpg
  utter_did_that_help:
    - text: Cela t'a aidé ?
  utter_happy:
    - text: Super, prend soin de toi !
  utter_goodbye:
  - text: au revoir, prenez soin de vous
  utter_iamabot:
    - text: Je suis un bot, fait par Rasa.
  utter_out_of_scope:
    - text: Désolé, j ai pas compris
  utter_ask_summary:
    - text: Quel est le titre de l'evenement ?
  utter_ask_start:
    - text: Cela pour quelle date ?
  utter_ask_end:
    - text: Quand est ce que cela va terminer ?
  utter_ask_description:
    - text: Donnez moi une petite description sur cet evenement
  utter_ask_youtube_query:
    - text: Donnez moi le titre de la video
  utter_ask_video_index:
    - text: donnez moi l indice de la video que vous souhaitez regarder
  utter_cancel_create_form:
    - text: Création d'événement annulée ...
  utter_additional:
    - text: Voulez vous des informations supplémentaires à propos de "{search_query}" ?
  utter_ok:
  - text: D'accord
  utter_position:
  - text: "voila : {index}"

actions:
  - action_add_event
  - action_additional_info
  - action_blenderbot
  - action_get_events_today
  - action_reset_ceate
  - action_wikipedia
  - utter_additional
  - validate_create_form
  - action_search_youtube
  - action_open_youtube

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
